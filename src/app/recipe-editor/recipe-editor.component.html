<div *ngIf="isEditMode; else viewMode">
  <!-- Edit Mode: Form -->
  <form (ngSubmit)="onSubmit()" #recipeForm="ngForm">
    <div class="d-flex justify-content-between align-items-center mb-3 p-1 ps-3"
      style="background-color: #d8dce1;height: 40px;">

      <h4 for="title" class="form-label me-2">Title</h4>
      <input type="text" id="title" class="form-control" [(ngModel)]="recipe.title" name="title" required />
    </div>
    <div class="ms-2 me-2 mb-1">


      <div>
        <div class="d-flex">
          <h4 class="me-2">Calories</h4>
          <input class="form-control me-2" placeholder="Kcal" [(ngModel)]="recipe.calories" name="calories"
            required />
        </div>
        <h4>Ingredients</h4>
        <div *ngFor="let ingredient of recipe.ingredients; let i = index" class="d-flex align-items-center mb-2">
          <input class="form-control me-2" placeholder="Name" [(ngModel)]="ingredient.name" name="ingredientName{{ i }}"
            required />
          <input type="number" class="form-control me-2" placeholder="Quantity" [(ngModel)]="ingredient.quantity"
            name="ingredientQuantity{{ i }}" required />
          <input class="form-control me-2" placeholder="Quantity Type" [(ngModel)]="ingredient.quantityType"
            name="ingredientQuantityType{{ i }}" required />
          <button type="button" class="btn btn-danger" (click)="removeIngredient(i)">
            <i class="fa-solid fa-trash"></i>
          </button>
        </div>
        <div class="d-flex justify-content-end">

          <button type="button" class="btn btn-success" (click)="addIngredient()">
            <i class="fa-solid fa-plus"></i> Add Ingredient
          </button>
        </div>

      </div>
      <div>
        <h4 class="form-label">Description</h4>
        <textarea style="height: 200px;" id="description" class="form-control" [(ngModel)]="recipe.description" name="description" rows="3"
          required></textarea>
      </div>
    </div>
    <button type="button" class="btn btn-secondary under-btn-left" (click)="toggleEditMode()">Cancel</button>
    <button type="submit" class="btn btn-success under-btn-right">Save</button>

  </form>
</div>

<ng-template #viewMode>
  <!-- View Mode -->
  <div>
    <div class="d-flex justify-content-between align-items-center  mb-3 p-1 ps-3"
      style="background-color: #d8dce1;height: 40px;">
      <span class="fs-4 fw-bold">{{recipe.title}}</span>
      <button class="btn btn-warning" (click)="toggleEditMode()">
        <i class="fa-solid fa-pen"></i>
      </button>

    </div>
    <h4 class="ms-3">Calories: {{recipe.calories}} kcal</h4>
    <div class="ms-3">
      <h4>Ingredients</h4>
      <ul>
        <li *ngFor="let ingredient of recipe.ingredients">
          {{ ingredient.quantity }} {{ ingredient.quantityType }} {{ ingredient.name }}
        </li>
      </ul>
      <h4>Description</h4>
      <p>{{ recipe.description }}</p>
      <button type="button" class="btn btn-secondary under-btn-left" (click)="back()">
        <i class="fa-solid fa-arrow-left"></i> Back
      </button>
    </div>

  </div>
</ng-template>
